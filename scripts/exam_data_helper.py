#!/usr/bin/env python3
"""
기출문제 데이터 입력 헬퍼
PDF에서 자동 추출이 어려운 경우, 수동으로 문제 목록을 입력할 수 있습니다.
"""

import json
from pathlib import Path

PROJECT_ROOT = Path(__file__).parent.parent
DATA_DIR = PROJECT_ROOT / "data" / "exam_results"

# 137회 정보관리기술사 기출문제 데이터
EXAM_137_DATA = {
    "1교시": [
        {"번호": "1", "제목": "IGP, EGP (동적 라우팅 프로토콜)", "키워드": ["라우팅", "프로토콜", "네트워크", "IGP", "EGP"]},
        {"번호": "2", "제목": "디지털 포렌식 아티팩트", "키워드": ["포렌식", "보안", "디지털"]},
        {"번호": "3", "제목": "MODBUS 프로토콜", "키워드": ["프로토콜", "통신", "MODBUS"]},
        {"번호": "4", "제목": "암호문 공격", "키워드": ["암호", "보안", "공격"]},
        {"번호": "5", "제목": "GNN (Graph Neural Network)", "키워드": ["AI", "GNN", "신경망", "그래프"]},
        {"번호": "6", "제목": "AI 거버넌스", "키워드": ["AI", "거버넌스", "윤리"]},
        {"번호": "7", "제목": "트랜스포머와 MoE", "키워드": ["AI", "Transformer", "MoE", "딥러닝"]},
        {"번호": "8", "제목": "AI 신뢰성 검인증 제도 (CAT)", "키워드": ["AI", "검인증", "제도", "CAT"]},
        {"번호": "9", "제목": "A/B 테스팅", "키워드": ["테스팅", "통계", "실험", "분석"]},
        {"번호": "10", "제목": "데이터 늪 (Data Swamp)", "키워드": ["데이터", "빅데이터", "품질"]},
        {"번호": "11", "제목": "소프트웨어 역공학과 재공학", "키워드": ["소프트웨어", "역공학", "재공학"]},
        {"번호": "12", "제목": "이진 탐색 트리", "키워드": ["자료구조", "트리", "알고리즘", "탐색"]},
        {"번호": "13", "제목": "연관 규칙 분석 (Association Rule Analysis)", "키워드": ["데이터마이닝", "연관규칙", "분석"]},
    ],
    "2교시": [
        {"번호": "1", "제목": "캐시 메모리 (쓰기 정책, 일관성)", "키워드": ["캐시", "메모리", "시스템", "컴퓨터구조"]},
        {"번호": "2", "제목": "SLA (구성요소, 절차, 평가지표)", "키워드": ["SLA", "운영", "관리", "서비스수준"]},
        {"번호": "3", "제목": "MCP 보안 취약점", "키워드": ["MCP", "보안", "취약점", "AI"]},
        {"번호": "4", "제목": "초거대 AI (개념, 기술요소, 도입절차)", "키워드": ["AI", "초거대", "도입", "LLM"]},
        {"번호": "5", "제목": "동적 테스트 (명세 기반, 구조 기반)", "키워드": ["테스트", "소프트웨어", "검증"]},
        {"번호": "6", "제목": "TEXT2SQL", "키워드": ["AI", "SQL", "데이터베이스", "자연어처리"]},
    ],
    "3교시": [
        {"번호": "1", "제목": "스케줄링 (CPU, 디스크)", "키워드": ["스케줄링", "운영체제", "CPU", "디스크"]},
        {"번호": "2", "제목": "정보시스템 감리 (운영, 유지보수)", "키워드": ["감리", "운영", "유지보수"]},
        {"번호": "3", "제목": "다중지역 동시 가동방식 재해복구", "키워드": ["재해복구", "시스템", "운영", "DR"]},
        {"번호": "4", "제목": "트랜잭션 격리 수준", "키워드": ["트랜잭션", "데이터베이스", "DBMS", "격리수준"]},
        {"번호": "5", "제목": "통신 프로토콜 (오류제어, 혼잡제어, 슬라이딩 윈도우)", "키워드": ["프로토콜", "통신", "네트워크", "TCP"]},
        {"번호": "6", "제목": "국가 망 보안체계 (N2SF)", "키워드": ["보안", "네트워크", "정책", "N2SF"]},
    ],
    "4교시": [
        {"번호": "1", "제목": "BPFdoor 악성코드 (개념, 차이점, 대응방안)", "키워드": ["악성코드", "보안", "백도어", "BPFdoor"]},
        {"번호": "2", "제목": "벡터 데이터베이스 HNSW, IVF", "키워드": ["데이터베이스", "벡터", "검색", "AI"]},
        {"번호": "3", "제목": "쿠버네티스 (개념, 컴포넌트, HPA)", "키워드": ["쿠버네티스", "클라우드", "컨테이너", "오케스트레이션"]},
        {"번호": "4", "제목": "UML 행위 다이어그램 (활동, 상태, 유스케이스)", "키워드": ["UML", "다이어그램", "설계", "모델링"]},
        {"번호": "5", "제목": "유전 알고리즘", "키워드": ["알고리즘", "최적화", "진화연산"]},
        {"번호": "6", "제목": "소프트웨어 사업 대가산정 (AI 서비스)", "키워드": ["대가산정", "소프트웨어", "관리", "프로젝트"]},
    ]
}


def save_exam_data(exam_number, exam_data):
    """기출문제 데이터를 JSON으로 저장"""
    DATA_DIR.mkdir(parents=True, exist_ok=True)

    output = {
        "exam_number": str(exam_number),
        "questions": exam_data,
        "metadata": {
            "total_questions": sum(len(questions) for questions in exam_data.values()),
            "periods": list(exam_data.keys())
        }
    }

    output_path = DATA_DIR / f"{exam_number}회_문제목록.json"

    with open(output_path, "w", encoding="utf-8") as f:
        json.dump(output, f, ensure_ascii=False, indent=2)

    print(f"✓ {exam_number}회 문제 데이터 저장: {output_path}")
    print(f"  총 {output['metadata']['total_questions']}문제")


# 136회 정보관리기술사 기출문제 데이터
EXAM_136_DATA = {
    "1교시": [
        {"번호": "1", "제목": "화이트 레이블 마케팅 (White Label Marketing)", "키워드": ["마케팅", "비즈니스", "브랜드", "SaaS"]},
        {"번호": "2", "제목": "범용 AI (General-Purpose AI) 위험관리 프레임워크", "키워드": ["AI", "위험관리", "GPAI", "프레임워크"]},
        {"번호": "3", "제목": "에이전틱 AI (Agentic AI)", "키워드": ["AI", "에이전트", "자율성", "Agentic"]},
        {"번호": "4", "제목": "제4 정규형", "키워드": ["데이터베이스", "정규화", "다치종속", "BCNF"]},
        {"번호": "5", "제목": "프록시 (Proxy) 디자인 패턴", "키워드": ["디자인패턴", "프록시", "GoF", "소프트웨어"]},
        {"번호": "6", "제목": "DevOps 장점과 단점", "키워드": ["DevOps", "CI/CD", "자동화", "개발"]},
        {"번호": "7", "제목": "세그먼테이션 오류 (Segmentation Fault)", "키워드": ["메모리", "오류", "운영체제", "시스템"]},
        {"번호": "8", "제목": "CXL (Compute Express Link)", "키워드": ["인터커넥트", "PCIe", "메모리", "시스템"]},
        {"번호": "9", "제목": "서버리스 컴퓨팅 (Serverless Computing)", "키워드": ["클라우드", "서버리스", "FaaS", "BaaS"]},
        {"번호": "10", "제목": "개인정보 안심구역과 데이터안심구역 비교", "키워드": ["개인정보", "데이터", "안심구역", "보호"]},
        {"번호": "11", "제목": "CC (Common Criteria)", "키워드": ["보안", "인증", "평가", "CC"]},
        {"번호": "12", "제목": "타원곡선 암호 (ECC, Elliptic Curve Cryptography)", "키워드": ["암호", "보안", "ECC", "타원곡선"]},
        {"번호": "13", "제목": "MCP (Model Context Protocol)", "키워드": ["AI", "프로토콜", "MCP", "LLM"]},
    ],
    "2교시": [
        {"번호": "1", "제목": "공급망관리 (SCM) - 정의, 배경, 효과성과 효율성", "키워드": ["SCM", "공급망", "경영", "효율성"]},
        {"번호": "2", "제목": "PMO (Project Management Office)", "키워드": ["프로젝트", "관리", "PMO", "조직"]},
        {"번호": "3", "제목": "LLM 도입 시 보안 이슈", "키워드": ["AI", "LLM", "보안", "취약점"]},
        {"번호": "4", "제목": "제품계열 방법론 (Product Line Engineering)", "키워드": ["소프트웨어", "방법론", "개발", "제품계열"]},
        {"번호": "5", "제목": "E2E 암호화 프로토콜", "키워드": ["암호화", "E2E", "보안", "프로토콜"]},
    ],
    "3교시": [
        {"번호": "1", "제목": "IT 프로젝트 갈등관리 - 터크만 팀 발달 5단계", "키워드": ["프로젝트", "갈등", "팀", "관리"]},
        {"번호": "2", "제목": "AX (AI Transformation) 추진 시 장애요인", "키워드": ["AI", "디지털전환", "AX", "혁신"]},
        {"번호": "3", "제목": "인스펙션 (Inspection)과 인스펙션 프로세스", "키워드": ["품질", "인스펙션", "검토", "소프트웨어"]},
        {"번호": "4", "제목": "아웃라이어 3가지 유형 (전역, 맥락, 군집)", "키워드": ["데이터", "아웃라이어", "이상치", "분석"]},
        {"번호": "5", "제목": "F1-score 계산 및 해석", "키워드": ["머신러닝", "평가지표", "F1", "통계"]},
        {"번호": "6", "제목": "메모리 누수 방지 기법", "키워드": ["메모리", "프로그래밍", "누수", "관리"]},
    ],
    "4교시": [
        {"번호": "1", "제목": "AI 윤리기준 - 3대 기본원칙, 10대 핵심요건, 생성형 AI 역기능", "키워드": ["AI", "윤리", "생성형AI", "정책"]},
        {"번호": "2", "제목": "동기화 기법 (공유 자원 충돌 해결)", "키워드": ["운영체제", "동기화", "병렬처리", "시스템"]},
        {"번호": "3", "제목": "제로 트러스트 (Zero Trust) 공급망 보안", "키워드": ["보안", "제로트러스트", "공급망", "아키텍처"]},
        {"번호": "4", "제목": "소프트웨어 라이프사이클 보안 품질 자동화", "키워드": ["보안", "소프트웨어", "DevSecOps", "자동화"]},
    ]
}


if __name__ == "__main__":
    # 136회, 137회 데이터 저장
    save_exam_data(136, EXAM_136_DATA)
    save_exam_data(137, EXAM_137_DATA)

    print("\n다른 회차 데이터를 추가하려면 이 스크립트를 수정하여 실행하세요.")
